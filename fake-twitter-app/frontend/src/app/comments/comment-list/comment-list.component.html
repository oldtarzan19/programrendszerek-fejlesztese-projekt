<div class="comment-list-container">
  <h3>Comments</h3>

  <!-- Új komment űrlap -->
  <app-new-comment
    [tweetId]="tweetId"
    (commented)="loadComments()"
  ></app-new-comment>

  <div *ngIf="loading">Loading comments…</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <mat-list *ngIf="!loading && comments.length">
    <mat-list-item *ngFor="let c of comments">
      <mat-card class="comment-card">
        <mat-card-header>
          <mat-card-title>{{ c.user.username }}</mat-card-title>
          <mat-card-subtitle>{{ c.createdAt | date:'short' }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          {{ c.content }}
        </mat-card-content>

        <!-- Törlés gomb, ha te vagy a szerző vagy admin -->
        <mat-card-actions *ngIf="canDelete(c)">
          <button mat-icon-button color="warn" (click)="deleteComment(c)">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-card-actions>
      </mat-card>
    </mat-list-item>
  </mat-list>

  <p *ngIf="!loading && !comments.length">No comments yet.</p>
</div>
